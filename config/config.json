{
  "server": {
    "name": "memory-server",
    "version": "1.0.0",
    "host": "0.0.0.0",
    "port": 8899,
    "debug": false
  },
  "storage": {
    "chromadb": {
      "path": "/home/lj/memory-mcp/data/chroma",
      "embedding_model": "all-MiniLM-L6-v2",
      "anonymized_telemetry": false
    },
    "redis": {
      "host": "localhost",
      "port": 6379,
      "db": 0,
      "password": null,
      "enable_cache": true
    },
    "registry_db": "data/registry.db"
  },
  "sync": {
    "enable_remote_sync": true,
    "sync_interval": 30,
    "conflict_resolution": "timestamp",
    "discovery": {
      "tailscale_enabled": true,
      "machines": ["lance-dev", "ljs-macbook-pro", "m2", "max"]
    }
  },
  "rules": {
    "database_path": "data/rules.db",
    "enable_versioning": true,
    "enable_dependencies": true,
    "enable_scheduling": true,
    "enable_haivemind_integration": true,
    "backup_interval": 86400,
    "backup_path": "data/backups/rules",
    "export_formats": ["yaml", "json"],
    "import_validation": "strict",
    "performance": {
      "cache_size": 1000,
      "cache_ttl": 300,
      "enable_indexing": true,
      "enable_optimization": true
    }
  },
  "memory": {
    "categories": ["project", "conversation", "agent", "global", "infrastructure", "incidents", "deployments", "monitoring", "runbooks", "security", "rules"],
    "max_age_days": 365,
    "auto_consolidate": true,
    "consolidate_interval": 86400,
    "project_tracking": {
      "enabled": true,
      "auto_detect": true,
      "scope_default": "auto"
    },
    "machine_groups": {
      "orchestrators": ["lance-dev"],
      "elasticsearch": ["elastic1", "elastic2", "elastic3", "elastic4", "elastic5"],
      "databases": ["mysql", "mongodb", "kafka"],
      "scrapers": ["telegram-scraper", "discord-scraper", "proxy0", "proxy1", "proxy2", "proxy3", "proxy4", "proxy5", "proxy6", "proxy7", "proxy8", "proxy9"],
      "dev_environments": ["tony-dev", "mike-dev", "oleg-dev", "chris-dev"],
      "monitoring": ["grafana", "auth-server"],
      "edge": ["frontend"],
      "personal": ["ljs-macbook-pro", "m2", "max"]
    },
    "sharing_rules": {
      "default_scope": "project-shared",
      "sync_with_groups": ["personal"],
      "exclude_machines": [],
      "private_categories": ["agent"],
      "encryption_required": ["production", "infrastructure"],
      "audit_categories": ["global", "conversation"]
    }
  },
  "remote_server": {
    "enabled": true,
    "host": "0.0.0.0",
    "port": 8900,
    "cors_enabled": true,
    "allowed_origins": ["*"],
    "mount_paths": {
      "sse": "/sse",
      "streamable_http": "/mcp"
    },
    "health_endpoint": "/health"
  },
  "claudeops": {
    "agent_registry": {
      "enabled": true,
      "heartbeat_interval": 300,
      "agent_ttl": 3600,
      "cleanup_interval": 600
    },
    "task_coordination": {
      "enabled": true,
      "task_timeout": 1800,
      "max_retries": 3,
      "coordination_channel": "claudeops:coordination"
    },
    "collaboration": {
      "broadcast_channel": "claudeops:broadcast",
      "expertise_routing": true,
      "consensus_threshold": 0.6,
      "auto_handoff": true
    },
    "devops_features": {
      "infrastructure_tracking": true,
      "incident_management": true,
      "deployment_tracking": true,
      "runbook_generation": true,
      "monitoring_integration": true
    }
  },
  "connectors": {
    "confluence": {
      "url": "https://unit221b.atlassian.net",
      "credentials": {
        "username": "lancejames@unit221b.com",
        "token": "${CONFLUENCE_API_TOKEN}"
      },
      "spaces": ["INFRA", "DEVOPS", "DOCS", "EWITNESS"],
      "enabled": false,
      "space_category_mapping": {
        "INFRA": "infrastructure",
        "DEVOPS": "devops", 
        "DOCS": "documentation",
        "EWITNESS": "monitoring"
      },
      "sync_interval": 3600,
      "max_age_hours": 24,
      "auto_import_new": true,
      "auto_update_existing": true
    },
    "jira": {
      "url": "https://unit221b.atlassian.net",
      "credentials": {
        "username": "lancejames@unit221b.com", 
        "token": "${JIRA_API_TOKEN}"
      },
      "projects": ["INFRA", "DEVOPS", "SUPPORT", "EWITNESS"],
      "enabled": false
    }
  },
  "aggregator": {
    "enabled": true,
    "name": "MCP SSE Aggregator",
    "host": "0.0.0.0",
    "port": 8950,
    "namespace": {
      "auto_prefix": true,
      "conflict_resolution": "priority",
      "allow_unprefixed": ["high_priority_tools"],
      "reserved_prefixes": ["mcp__", "registry__", "system__", "aggregator__"]
    },
    "static_servers": [
      {
        "id": "memory-server",
        "name": "hAIveMind Memory",
        "endpoint": "http://localhost:8900/sse",
        "transport": "sse",
        "priority": 10,
        "auto_start": true,
        "health_check": "http://localhost:8900/health"
      }
    ],
    "discovery": {
      "methods": ["static", "network", "api"],
      "network_discovery": {
        "enabled": true,
        "scan_ranges": ["10.0.0.0/8", "192.168.0.0/16"],
        "ports": [8900, 8901, 8902, 8903, 8904],
        "interval": 60
      }
    },
    "health": {
      "check_interval": 30,
      "timeout": 10,
      "failure_threshold": 3,
      "recovery_threshold": 2,
      "actions": {
        "degraded": {
          "reduce_traffic": 50,
          "log_warning": true
        },
        "unhealthy": {
          "stop_routing": true,
          "notify_admin": true,
          "attempt_restart": true
        },
        "unreachable": {
          "remove_from_pool": true,
          "alert_critical": true
        }
      }
    },
    "auth": {
      "enabled": true,
      "methods": ["jwt", "api_key"],
      "propagate_user_context": true
    }
  },
  "authorship": {
    "default_author": "Lance James",
    "organization": "Unit 221B, Inc",
    "disable_ai_attribution": true,
    "commit_templates": {
      "remove_co_author": true,
      "remove_generated_with": true
    }
  },
  "mcp_hosting": {
    "enabled": true,
    "servers_dir": "data/mcp_servers",
    "uploads_dir": "data/mcp_uploads", 
    "logs_dir": "data/mcp_logs",
    "max_servers": 10,
    "health_check_interval": 30,
    "auto_cleanup": true,
    "cleanup_interval": 3600,
    "dashboard": {
      "enabled": true,
      "host": "0.0.0.0",
      "port": 8910,
      "debug": false
    },
    "security": {
      "allowed_languages": ["python", "node", "bash"],
      "sandbox_by_default": true,
      "max_upload_size_mb": 100,
      "scan_uploads": true
    }
  },
  "security": {
    "enable_auth": true,
    "jwt_secret": "${HAIVEMIND_JWT_SECRET:-change-this-secret-key}",
    "api_tokens": {
      "enabled": true,
      "admin_token": "${HAIVEMIND_ADMIN_TOKEN}",
      "read_only_token": "${HAIVEMIND_READONLY_TOKEN}",
      "agent_token": "${HAIVEMIND_AGENT_TOKEN}"
    },
    "allowed_origins": ["localhost", "127.0.0.1", "lance-dev", "ljs-macbook-pro", "m2", "max"],
    "ip_whitelist": ["127.0.0.1", "10.0.0.0/8", "172.16.0.0/12", "192.168.0.0/16"],
    "rate_limiting": {
      "enabled": true,
      "requests_per_minute": 120,
      "burst_limit": 10
    },
    "tls": {
      "enabled": false,
      "cert_file": "/etc/ssl/certs/haivemind.crt",
      "key_file": "/etc/ssl/private/haivemind.key"
    }
  }
}